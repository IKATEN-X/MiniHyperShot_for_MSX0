10 SAVE"hsx.bas
20 COLOR 1,15,15:SCREEN5:DEFINT A-Z:OPEN "GRP:" FOR OUTPUT AS #1
30 LINE(0,71)-(255,71),1:LINE(0,142)-(255,142),1
40 LINE(85,0)-(85,212),1:LINE(170,0)-(170,212),1
50 CIRCLE(43,110),20,8:PAINT(43,110),8:DRAW"BM32,80":PRINT#1,"RUN"
60 CIRCLE(213,181),20,8:PAINT(213,181),8:DRAW"BM200,150":PRINT#1,"JUMP"
70 _IOTINIT()
80 _IOTFIND("device/i2c_a",A):PRINTA
90 _IOTFIND("device/i2c_a",I$(0),A):FOR I=0 TO A-1:PRINT I$(I):NEXT
100 DP$="device/i2c_a/45"
110 MS$=CHR$(0)+STRING$(8,CHR$(1)) ' EXTIO2_MODE_REG(0x00) + DIGITAL_OUTPUT_MODE(1)
120 _IOTPUT(DP$,MS$)
130 FOR I=0 TO 7
140 AP$=CHR$(I)+CHR$(1) ' PIN No(0 to 7 + DIGITAL_OUTPUT_MODE(1)
150 _IOTPUT(DP$,AP$)
160 NEXT
170 FOR I=0 TO 7:_IOTPUT(DP$,CHR$(&H10+I)+CHR$(1)):NEXT
180 _TURBO ON
190 DP$="device/i2c_a/45"
200 WT=2
210 U0$=CHR$(&H10)
220 D0$=CHR$(&H11)
230 L0$=CHR$(&H12)+CHR$(0):L1$=CHR$(&H12)+CHR$(1)
240 R0$=CHR$(&H13)+CHR$(0):R1$=CHR$(&H13)+CHR$(1)
250 T1$=CHR$(&H15)
270 '
280 S=STICK(1)
290 ON S GOSUB 360,350,600,350,410,350,460,350
300 T=STRIG(1)XOR1:IF PT<>T THEN PS$=T1$+CHR$(T AND 1):GOSUB 540 
310 NU=(S=1)XOR1:IF PU<>NU THEN PS$=U0$+CHR$(NU AND 1):GOSUB 540
320 ND=(S=5)XOR1:IF PD<>ND THEN PS$=D0$+CHR$(ND AND 1):GOSUB 540
330 PT=T:PU=NU:PD=ND
340 GOTO 280
350 RETURN
360 ' UP
370 PS$=U0$:GOSUB 540:TIME=0
380 IF TIME<WT THEN 380
390 PS$=U1$:GOSUB 540
400 RETURN
410 ' down
420 PS$=D0$:GOSUB 540:TIME=0
430 IF TIME<WT THEN 430
440 PS$=D1$:GOSUB 540
450 RETURN
460 '
470 PS$=L0$:GOSUB 540:TIME=0
480 IF TIME<WT THEN 480
490 PS$=L1$:GOSUB 540
500 PS$=R0$:GOSUB 540:TIME=0
510 IF TIME<WT THEN 510
520 PS$=R1$:GOSUB 540
530 RETURN
540 '----------IOTPUT S
550 OUT&H58,&HE0:OUT&H58,1:OUT&H58,&H53
560 OUT&H58,&HC0:LN=LEN(DP$):OUT&H58,LN:FOR II=1TOLN:OUT&H58,ASC(MID$(DP$,II,1)):NEXTII:OUT&H58,0:RR=INP(88)
570 OUT&H58,&HE0:OUT&H58,1:OUT&H58,&H43
580 OUT&H58,&HC0:LN=LEN(PS$):OUT&H58,LN:FOR II=1TOLN:OUT&H58,ASC(MID$(PS$,II,1)):NEXTII:OUT&H58,0:RR=INP(88)
590 RETURN
600 _TURBOOFF
610 FOR I=0 TO 7:_IOTPUT(DP$,CHR$(&H10+I)+CHR$(1)):NEXT